<!-- order-detail.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Details</title>
  <link rel="stylesheet" href="/frontend/public/css/adminCustomerOrderDetails.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="topbar">
        <h1>ToughToes</h1>
        <div class="user-info">
          <span>John Doe</span>
          <img src="/profile.png" alt="Profile Picture">
        </div>
      </div>
    </header>

    <main>
      <nav class="sidebar">
        <ul>
          <li><a href="/dashboard">Dashboard</a></li>
          <li><a href="/orders" class="active">Orders</a></li>
          <li><a href="/products">Products</a></li>
          <li><a href="/customers">Customers</a></li>
          <li><a href="/coupons">Coupons</a></li>
          <li><a href="/categories">Categories</a></li>
          <li><a href="/refund-return">Refund/Return</a></li>
          <li><a href="/review">Review</a></li>
          <li><a href="/signout">Sign Out</a></li>
        </ul>
      </nav>

      <section class="main-content">
        <div class="order-header">
          <h2>Order Details - <%= order.id %></h2>
          <button class="print-invoice">Print Invoice</button>
        </div>

        <!-- Order Status Section -->
        <div class="order-status">
          <h3>Order Status</h3>
          <select>
            <option value="processing" <% if(order.status === 'processing') { %> selected <% } %> >Processing</option>
            <option value="onDelivery" <% if(order.status === 'onDelivery') { %> selected <% } %> >On Delivery</option>
            <option value="delivered" <% if(order.status === 'delivered') { %> selected <% } %> >Delivered</option>
            <option value="pending" <% if(order.status === 'pending') { %> selected <% } %> >Pending</option>
          </select>
          <button class="update-status">Update Status</button>
          <div class="order-timeline">
            <% order.timeline.forEach(item => { %>
              <div class="timeline-item">
                <p><strong><%= item.title %></strong></p>
                <p><%= item.date %></p>
              </div>
            <% }); %>
          </div>
        </div>

        <!-- Order Items Section -->
        <div class="order-items">
          <h3>Order Items</h3>
          <table>
            <thead>
              <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              <% order.items.forEach(item => { %>
                <tr>
                  <td><%= item.name %></td>
                  <td>$<%= item.price.toFixed(2) %></td>
                  <td><%= item.quantity %></td>
                  <td>$<%= (item.price * item.quantity).toFixed(2) %></td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>

        <!-- Payment and Shipping Info Section -->
        <div class="order-summary">
          <div class="customer-info">
            <h4>Customer Information</h4>
            <p><%= order.customer.name %></p>
            <p><%= order.customer.email %></p>
            <p><%= order.customer.phone %></p>
          </div>

          <div class="shipping-info">
            <h4>Shipping Address</h4>
            <p><%= order.shipping.address %></p>
          </div>

          <div class="payment-info">
            <h4>Payment Information</h4>
            <p><%= order.payment.method %></p>
          </div>

          <div class="order-summary-details">
            <h4>Order Summary</h4>
            <p>Subtotal: $<%= order.subtotal.toFixed(2) %></p>
            <p>Shipping: $<%= order.shippingCost.toFixed(2) %></p>
            <p>Tax: $<%= order.tax.toFixed(2) %></p>
            <p>Total: $<%= order.total.toFixed(2) %></p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
document.addEventListener('DOMContentLoaded', function () {
  // Handle order status update
  document.querySelector('.update-status').addEventListener('click', function() {
    const status = document.querySelector('.order-status select').value;
    alert('Order status updated to: ' + status);
  });

  // Handle print invoice
  document.querySelector('.print-invoice').addEventListener('click', function() {
    alert('Printing invoice...');
  });
});
</script>
</body>
</html>
